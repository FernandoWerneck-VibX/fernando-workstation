---
- name: Instalar SDKMAN
  become_user: "{{ dev_user }}"
  shell: curl -s "https://get.sdkman.io" | bash

- name: Instalar Java/Maven/Gradle
  become_user: "{{ dev_user }}"
  shell: |
    source "{{ dev_home }}/.sdkman/bin/sdkman-init.sh"
    sdk install java {{ java_version }}
    sdk install maven
    sdk install gradle
  args: {executable: /bin/bash}

- name: Instalar NVM
  become_user: "{{ dev_user }}"
  shell: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash

- name: Instalar Node/Yarn/PNPM/Vue/Vite
  become_user: "{{ dev_user }}"
  shell: |
    export NVM_DIR="{{ dev_home }}/.nvm"
    . "$NVM_DIR/nvm.sh"
    nvm install {{ node_version }}
    nvm alias default {{ node_version }}
    npm install -g yarn pnpm @vue/cli create-vite

- name: DependÃªncias Pyenv
  apt:
    name:
      - make
      - build-essential
      - libssl-dev
      - zlib1g-dev
      - libbz2-dev
      - libreadline-dev
      - libsqlite3-dev
      - llvm
      - tk-dev
      - libffi-dev
      - liblzma-dev
      - python3-openssl

- name: Instalar Pyenv
  become_user: "{{ dev_user }}"
  shell: curl https://pyenv.run | bash

- name: Instalar Python via Pyenv
  become_user: "{{ dev_user }}"
  shell: |
    export PYENV_ROOT="{{ dev_home }}/.pyenv"
    export PATH="$PYENV_ROOT/bin:$PATH"
    eval "$(pyenv init -)"
    pyenv install -s {{ python_version }}
    pyenv global {{ python_version }}
  args: {executable: /bin/bash}
